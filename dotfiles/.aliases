
#! /bin/sh
#############################
#         ALIASES           #
#############################
# navegación
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ~="cd ~"


# atajos
alias c="clear"
alias h="history"
alias e="exit"
alias sb="source ~/.bashrc"
alias sz="source ~/.zshrc"
alias w="which"
alias rp="systemctl --user restart pulseaudio"

# permite ejecutar aliases como sudo
alias sudo="sudo "


# verbose en los comandos básicos y pedir confirmación
alias mv="mv -vi"         #confirmar antes de sobreescribir y muestra lo que hace
alias cp="cp -vi"         #confirmar antes de sobreescribir y muestra lo que hace
alias rm="rm -v"          #muestra lo que hace
alias mkdir="mkdir -pv"   #muestra lo que hace
alias ln="ln -vi"         #confirmar antes de sobreescribir y muestra lo que hace


# listar archivos
## exa
if [ -f /usr/bin/exa ]; then
    alias ls="exa --color=auto --group-directories-first -s extension" # ordena exa
    alias l="ls"
    alias la="ls -a"
    alias ll="ls -l"
    alias lla="ls -la"
    alias tree="ls -T -L 2 --icons"
else
    alias ls="ls --color=auto --group-directories-first -vXH" # ordena ls
    alias l="ls -w 1"
    alias la="ls -A"
    alias ll="ls -lh"
    alias lla="ls -lhA"
fi


# gestión de paquetes
## pacman
if [ -f /usr/bin/pacman ]; then
    alias {update,refrezcar}="sudo pacman -Syy"
    alias {upgrade,actualizar}="sudo pacman -Syu --noconfirm" # actualiza sin pedir confirmación para instalar
    alias {install,instalar}="sudo pacman -S"
    alias {remove,remover}="sudo pacman -R"
    alias {autoremove,limpiar}="sudo pacman -Rscn"
    alias {search,buscar}="pacman -Ss"
    alias huerfanos="pacman -Qdtq"  # busca paquetes huérfanos

    alias update-mirrors="sudo pacman-mirrors -c Chile,Uruguay,Brazil && sudo pacman -Syy" # actualiza los mirrors de los paises dados
    alias pacman.conf="nano /etc/pacman.conf"
    alias mirrors="nano /etc/pacman.d/mirrorlist"
fi

## apt
if [ -f /usr/bin/apt ]; then
  alias {update,refrezcar}='sudo apt update'
  alias {upgrade,actualizar}='sudo apt update && sudo apt upgrade -y && sudo apt dist-upgrade -y' # actualiza sin pedir confirmación para instalar
  alias {install,instalar}='sudo apt update && sudo apt install'
  alias {remove,remover}="sudo apt remove"
  alias {autoremove,limpiar}="sudo apt autoremove"
  alias {search,buscar}="apt search"

  alias mirrors="nano /etc/apt/sources.list"
fi


# aplicaciones
alias firewall="gufw"


# flags en comandos que facilitan la vida
alias rsync="rsync -aAXv --progress"
alias pactree="pactree -d 1 --color" # muestra dependencias de un paquete
alias fsck="sudo fsck -V -y" # acepta todas las correciones sin preguntar y muestra lo que hace
alias ping="ping -c 5"

# sudo en comandos recurrentes
alias mount="sudo mount"
alias umount="sudo umount"
alias blkid="sudo blkid"


#alias systemctl="sudo systemctl"
alias timeshift="sudo timeshift"


# editar archivos importantes
alias zr="nano ~/.zshrc"
alias br="nano ~/.bashrc"
alias nr="nano ~/.nanorc"
alias al="nano ~/.aliases"
alias sc="nano ~/.scripts"
alias fstab="nano /etc/fstab"


# phyton
alias python="python3"
alias py="python"
alias pip="pip3"


# otros aliases standard
alias df='df -h'      # human-readable sizes
alias free='free -m'  # show sizes in MB
alias more=less

alias grep='grep --colour=auto'
alias egrep='egrep --colour=auto'
alias fgrep='fgrep --colour=auto'

alias {poweroff,apagar}="systemctl poweroff"
alias {reboot,reiniciar}="systemctl reboot"
alias {suspend,suspender}="systemctl suspend"


#############################
#       FUNCIONES           #
#############################


# Create a new directory and enter it
function mkcd() {
	mkdir -p "$@" && cd "$_";
}

# Normalize `open` across Linux, macOS, and Windows.
# This is needed to make the `o` function (see below) cross-platform.
if [ ! $(uname -s) = 'Darwin' ]; then
	if grep -q Microsoft /proc/version; then
		# Ubuntu on Windows using the Linux subsystem
		alias open='explorer.exe';
	else
		alias open='xdg-open';
	fi
fi

# `o` with no arguments opens the current directory, otherwise opens the given
# location
function o() {
	if [ $# -eq 0 ]; then
		open .;
	else
		open "$@";
	fi;
}


# Determine size of a file or total size of a directory
function fs() {
	if du -b /dev/null > /dev/null 2>&1; then
		local arg=-sbh;
	else
		local arg=-sh;
	fi
	if [[ -n "$@" ]]; then
		du $arg -- "$@";
	else
		du $arg .[^.]* ./*;
	fi;
}

# # ex - archive extractor
# # usage: ex <file>
ex ()
{
  if [ -f $1 ] ; then
    case $1 in
      *.tar.bz2)   tar xjf $1   ;;
      *.tar.gz)    tar xzf $1   ;;
      *.bz2)       bunzip2 $1   ;;
      *.rar)       unrar x $1     ;;
      *.gz)        gunzip $1    ;;
      *.tar)       tar xf $1    ;;
      *.tbz2)      tar xjf $1   ;;
      *.tgz)       tar xzf $1   ;;
      *.zip)       unzip $1     ;;
      *.Z)         uncompress $1;;
      *.7z)        7z x $1      ;;
      *)           echo "'$1' cannot be extracted via ex()" ;;
    esac
  else
    echo "'$1' is not a valid file"
  fi
}


